{% load static %}
{% include "header.html" %}
<link rel="stylesheet" href="{% static 'css/order_history.css' %}">

<div class="order-history-container">
  <h2>Order History</h2>

  {% if orders %}
    <div class="orders-list">
      {% for order in orders %}
      <div class="order-card">
        <div class="order-header">
          <div class="order-info">
            <h3>Order #{{ order.id }}</h3>
            <span class="order-date">{{ order.order_date|date:"F d, Y g:i A" }}</span>
          </div>
          <div class="order-status status-{{ order.status }}">
            {{ order.get_status_display }}
          </div>
        </div>

        <div class="order-body">
          <div class="order-items-preview">
            <strong>Items:</strong>
            <ul>
              {% for item in order.items.all|slice:":3" %}
              <li>{{ item.product.name }} Ã— {{ item.quantity }}</li>
              {% endfor %}
              {% if order.items.count > 3 %}
              <li class="more-items">+ {{ order.items.count|add:"-3" }} more item(s)</li>
              {% endif %}
            </ul>
          </div>

          <div class="order-details-grid">
            <div class="detail-item">
              <span class="detail-label">Total Amount:</span>
              <span class="detail-value">â‚¹{{ order.total_amount }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Contact:</span>
              <span class="detail-value">{{ order.contact_number }}</span>
            </div>
          </div>

          <div class="shipping-address">
            <strong>Shipping Address:</strong>
            <p>{{ order.shipping_address }}</p>
          </div>
        </div>

        <div class="order-footer">
          <a href="{% url 'order_confirmation' order.id %}" class="view-details-btn">View Details</a>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-orders">
      <div class="no-orders-icon">ðŸ“¦</div>
      <h3>No Orders Yet</h3>
      <p>You haven't placed any orders yet. Start shopping to see your orders here!</p>
      <a href="/cart/" class="btn-shopping">Go Shopping</a>
    </div>
  {% endif %}
</div>

{% include "footer.html" %}

